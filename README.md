# 日本打车费用计算器

这是一个基于 Web 的日本打车费用计算应用，具有交互式地图界面，可以计算任意两点之间的打车费用。

## 功能特点

- 交互式地图界面（基于 OpenStreetMap）
- 实时操作日志显示
- 地点自动搜索（限制在日本境内）
- 实时路线显示
- 费用计算（基于距离和时间）
- 响应式设计
- 直观的用户界面

## 技术栈

- 后端：Python Flask
- 前端：HTML, CSS, JavaScript
- 地图服务：OpenStreetMap + Leaflet.js
- 路线规划：OSRM（Open Source Routing Machine）
- 地理编码：Nominatim

## 安装步骤

1. 克隆项目到本地
2. 安装依赖：
   ```bash
   pip install -r requirements.txt
   ```
3. 运行应用：
   ```bash
   python app.py
   ```

## 使用说明

1. 在起点和终点输入框中输入或选择地点
   - 建议使用日语或英语输入地点名称
   - 例如：东京站、涩谷站、新宿站等
   - 如果找不到地点，请尝试使用更具体的位置描述

2. 点击"计算费用"按钮
   - 系统会自动搜索地点
   - 在地图上显示路线
   - 计算预计费用
   - 实时显示操作日志

3. 查看结果
   - 地图上显示路线
   - 显示距离、时间和费用信息
   - 右侧面板显示详细的操作日志

## 费用计算规则

- 基础费用：410 日元
- 每公里费用：80 日元
- 等待时间费用：80 日元/分钟

## 注意事项

- 费用计算基于东京地区的标准费率
- 实际费用可能因交通状况、时间等因素有所不同
- 地理编码服务有使用限制，建议在实际生产环境中使用自己的地理编码服务
- 路线规划可能不如商业地图服务精确，但基本功能都能满足需求

## 界面说明

- 左侧面板：
  - 地点搜索框
  - 费用计算结果
  - 使用提示

- 右侧面板：
  - 实时操作日志
  - 显示所有操作的状态和结果

- 底部：
  - 交互式地图
  - 显示路线和标记

## 开发说明

- 前端日志系统使用自定义的 `logMessage` 函数
- 地理编码限制在日本境内（countrycodes=jp）
- 使用 OSRM 的演示服务器进行路线规划
- 所有 API 调用都有错误处理和用户提示 